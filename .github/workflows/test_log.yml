name: ì‹¤í—˜ì‹¤ (test-log)

on:
  schedule:
    # UTC ê¸°ì¤€ 03:00ëŠ” í•œêµ­ ì‹œê°„ 12:00ì…ë‹ˆë‹¤.
    # ì›”ìš”ì¼(1), ì¼ìš”ì¼(0) 12ì‹œì— ì‹¤í–‰
    - cron: '*/5 3 * * 1,0'
  workflow_dispatch: # ë²„íŠ¼ ëˆŒëŸ¬ì„œ ìˆ˜ë™ ì‹¤í–‰ (í•„ìˆ˜!)
    inputs:
      log_message:
        description: 'ë¡œê·¸ì— ë‚¨ê¸¸ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”'
        required: false
        default: 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤...'
permissions:
  contents: write
  
jobs:
  test_job :
    runs-on: ubuntu-latest
    steps : 
      - name : log í…ŒìŠ¤íŠ¸
        run : | 
          echo "Test Area Start ================="
          echo github.event.schedule
          # ${{ }} ë¥¼ ì“°ë©´ ê¹ƒí—ˆë¸Œê°€ ë¨¼ì € ê°’ì„ ì±„ì›Œë„£ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.
          SCHEDULE_VAL="${{ github.event.schedule }}"
          if [ "$SCHEDULE_VAL" == '* * * * 0' ]; then
            echo "sun"
          elif [ "$SCHEDULE_VAL" == '* * * * 1' ]; then
            echo "mon"
          elif [ "$SCHEDULE_VAL" == '* * * * 2' ]; then
            echo "tue"
          elif [ "$SCHEDULE_VAL" == '* * * * 3' ]; then
            echo "wed"
           elif [ "$SCHEDULE_VAL" == '* * * * 4' ]; then
            echo "thu"
           elif [ "$SCHEDULE_VAL" == '* * * * 5' ]; then
            echo "fri"
           elif [ "$SCHEDULE_VAL" == '* * * * 6' ]; then
            echo "sat"
          else
            echo "fail"
          fi
          echo "Test Area End ================="
          

    # steps:
    # # 1. í™˜ê²½ ì„¤ì •
    # - name: ì²´í¬ì•„ì›ƒ
    #   uses: actions/checkout@v3

    # # 2. íŒŒì´ì¬ìœ¼ë¡œ ë¡œê·¸ íŒŒì¼ ë§Œë“¤ê¸° (ì‹¤í—˜ìš©)
    # - name: íŒŒì´ì¬ ë¡œê·¸ ìƒì„± í…ŒìŠ¤íŠ¸
    #   run: |
    #     # íŒŒì´ì¬ ì½”ë“œë¥¼ ì¦‰ì„ì—ì„œ ë§Œë“¤ì–´ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.
    #     cat <<EOF > test_script.py
    #     import datetime
    #     import sys

    #     # ì…ë ¥ë°›ì€ ë©”ì‹œì§€
    #     msg = "${{ inputs.log_message }}"
    #     now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    #     log_content = f"[{now}] ë¡œê·¸ ì‹œì‘\n"
    #     log_content += f"[{now}] ì…ë ¥ ë©”ì‹œì§€: {msg}\n"
    #     log_content += f"[{now}] ê³„ì‚° í…ŒìŠ¤íŠ¸: 1+1={1+1}\n"
    #     log_content += f"[{now}] ë¡œê·¸ ì¢…ë£Œ"

    #     # 1) í™”ë©´(Console)ì— ì¶œë ¥ (ë°©ë²• A)
    #     print("--- ì½˜ì†” ì¶œë ¥ ì‹œì‘ ---")
    #     print(log_content)
    #     print("--- ì½˜ì†” ì¶œë ¥ ë ---")

    #     # 2) íŒŒì¼(log.txt)ì— ì €ì¥ (ë°©ë²• B)
    #     with open("execution.log", "w", encoding="utf-8") as f:
    #         f.write(log_content)
        
    #     # 3) ê¹ƒí—ˆë¸Œ ìš”ì•½(Summary)ì— ì¶œë ¥ (ë°©ë²• C - ë§ˆí¬ë‹¤ìš´ ì§€ì›)
    #     with open(os.environ['GITHUB_STEP_SUMMARY'], 'a', encoding='utf-8') as f:
    #          f.write("## ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë¦¬í¬íŠ¸\n")
    #          f.write(f"- **ì‹œê°„**: {now}\n")
    #          f.write(f"- **ë©”ì‹œì§€**: {msg}\n")
    #          f.write("> í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    #     EOF
        
    #     # ìœ„ì—ì„œ ë§Œë“  íŒŒì´ì¬ íŒŒì¼ ì‹¤í–‰
    #     python test_script.py

    # # 3. ë¡œê·¸ íŒŒì¼ ì—…ë¡œë“œ (ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„!)
    # # íŒŒì¼ì„ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— Pushí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, 'ë‹¤ìš´ë¡œë“œ' í•  ìˆ˜ ìˆê²Œ ì˜¬ë ¤ì¤ë‹ˆë‹¤.
    # # ì—ëŸ¬ê°€ ë‚˜ë„ ë¡œê·¸ëŠ” ë‚¨ì•„ì•¼ í•˜ë¯€ë¡œ 'always()' ì¡°ê±´ì„ ë‹µë‹ˆë‹¤.
    # - name: ë¡œê·¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œìš©ìœ¼ë¡œ ì—…ë¡œë“œ
    #   if: always() 
    #   uses: actions/upload-artifact@v4
    #   with:
    #     name: my-test-logs # ë‹¤ìš´ë¡œë“œë  íŒŒì¼ ì´ë¦„
    #     path: execution.log # ìœ„ì—ì„œ ë§Œë“  íŒŒì¼ëª…
    #     retention-days: 1   # 1ì¼ ë’¤ ìë™ ì‚­ì œ (ìš©ëŸ‰ ì ˆì•½)
